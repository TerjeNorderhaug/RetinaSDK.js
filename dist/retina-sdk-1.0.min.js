var retinaSDK={};retinaSDK.FullClient=function(e,t,n){function o(n,o,r,s){n=t+n,(null==r||"undefined"==typeof r)&&(r={});var i=new XMLHttpRequest,p="undefined"!=typeof s&&"function"==typeof s.success;return i.open(o,n,p),n.indexOf("/image")>=0&&-1==n.indexOf("bulk")?i.setRequestHeader("Accept","image/png"):i.setRequestHeader("Accept","application/json"),i.setRequestHeader("Content-type","application/json"),i.setRequestHeader("api-key",e),i.setRequestHeader("api-client","js_1.0"),p?(i.onreadystatechange=function(){4==i.readyState&&200==i.status?-1==i.responseURL.indexOf("/rest/image")||i.responseURL.indexOf("/rest/image/bulk")>=0?s.success(JSON.parse(i.responseText)):s.success(i.responseText):4==i.readyState&&200!=i.status&&"function"==typeof s.error&&s.error(i.responseText)},void i.send(r)):(i.send(r),-1==i.responseURL.indexOf("/rest/image")||i.responseURL.indexOf("/rest/image/bulk")>=0?JSON.parse(i.responseText):i.responseText)}function r(e,t,r){return t&&"undefined"==typeof t.retina_name&&-1==e.indexOf("retinas")&&(t.retina_name=n),e=i(e,t),o(e,"GET",null,r)}function s(e,t,r){return t&&"undefined"==typeof t.retina_name&&(t.retina_name=n),e=i(e,t),o(e,"POST",JSON.stringify(t.body),r)}function i(e,t){var n=!0;for(var o in t)if("body"!=o&&(n?(e+="?",n=!1):e+="&",t.hasOwnProperty(o))){var r=o,s=t[o];e=e+r+"="+s}return e}function p(e,t){for(var n=0;n<t.length;n++){var o=t[n];if("undefined"==typeof e[o])throw new Error("Required request parameter '"+o+"' was not set.")}}function f(e){return"undefined"!=typeof e?e[0].positions:void 0}function u(e){return"undefined"!=typeof e?e.positions:void 0}function a(e,t){if("undefined"!=typeof e){var n=e;e=function(e){var o=t(e);n(o)}}return e}function c(e){return{success:e}}if("undefined"==typeof e)throw new Error("Required apiKey argument was missing.");"undefined"==typeof t&&(t="http://api.cortical.io/rest/"),"undefined"==typeof n&&(n="en_associative");var y={};return y.getRetinas=function(e,t){return"function"==typeof e?(t=c(e),e=void 0):e&&"function"==typeof e.success&&(t=e,e=void 0),"function"==typeof t&&(t=c(t)),r("retinas",e,t)},y.getTerms=function(e,t){return"function"==typeof e?(t=c(e),e=void 0):e&&"function"==typeof e.success?(t=e,e=void 0):"string"==typeof e&&(e={term:e}),"function"==typeof t&&(t=c(t)),r("terms",e,t)},y.getContextsForTerm=function(e,t){return"string"==typeof e&&(e={term:e}),"function"==typeof t&&(t=c(t)),p(e,["term"]),r("terms/contexts",e,t)},y.getSimilarTermsForTerm=function(e,t){return"string"==typeof e&&(e={term:e}),"function"==typeof t&&(t=c(t)),p(e,["term"]),r("terms/similar_terms",e,t)},y.getFingerprintForText=function(e,t){return"string"==typeof e?e={body:e}:"undefined"!=typeof e.text&&(e.body=e.text,delete e.text),"function"==typeof t&&(t=c(t)),t&&"function"==typeof t.success&&(t.success=a(t.success,f)),f(s("text",e,t))},y.getKeywordsForText=function(e,t){return"string"==typeof e?e={body:e}:"undefined"!=typeof e.text&&(e.body=e.text,delete e.text),"function"==typeof t&&(t=c(t)),s("text/keywords",e,t)},y.getTokensForText=function(e,t){return"string"==typeof e?e={body:e}:"undefined"!=typeof e.text&&(e.body=e.text,delete e.text),e.pos_tags&&(e.POStags=e.pos_tags,delete e.pos_tags),"function"==typeof t&&(t=c(t)),p(e,["body"]),s("text/tokenize",e,t)},y.getSlicesForText=function(e,t){return"string"==typeof e?e={body:e}:"undefined"!=typeof e.text&&(e.body=e.text,delete e.text),"function"==typeof t&&(t=c(t)),p(e,["body"]),s("text/slices",e,t)},y.getFingerprintsForTexts=function(e,t){var n=0,o=0;if(Array.isArray(e)){for(n=e.length,o=0;n>o;o++)e[o]={text:e[o]};e={body:e}}else if("undefined"!=typeof e.texts){for(n=e.texts.length,o=0;n>o;o++)e.texts[o]={text:e.texts[o]};e.body=e.texts,delete e.texts}return"function"==typeof t&&(t=c(t)),p(e,["body"]),s("text/bulk",e,t)},y.getLanguageForText=function(e,t){return"string"==typeof e?e={body:e}:"undefined"!=typeof e.text&&(e.body=e.text,delete e.text),"function"==typeof t&&(t=c(t)),p(e,["body"]),s("text/detect_language",e,t)},y.getFingerprintForExpression=function(e,t){return"function"==typeof t&&(t=c(t)),t&&"function"==typeof t.success&&(t.success=a(t.success,u)),"string"==typeof e?e={body:{text:e}}:(p(e,["expression"]),e.body=e.expression,delete e.expression),u(s("expressions",e,t))},y.getContextsForExpression=function(e,t){return"function"==typeof t&&(t=c(t)),"string"==typeof e?e={body:{text:e}}:(p(e,["expression"]),e.body=e.expression,delete e.expression),s("expressions/contexts",e,t)},y.getSimilarTermsForExpression=function(e,t){return"function"==typeof t&&(t=c(t)),"string"==typeof e?e={body:{text:e}}:(p(e,["expression"]),e.body=e.expression,delete e.expression),s("expressions/similar_terms",e,t)},y.getFingerprintsForExpressions=function(e,t){return"function"==typeof t&&(t=c(t)),p(e,["expressions"]),e.body=e.expressions,delete e.expressions,s("expressions/bulk",e,t)},y.getContextsForExpressions=function(e,t){return"function"==typeof t&&(t=c(t)),p(e,["expressions"]),e.body=e.expressions,delete e.expressions,s("expressions/contexts/bulk",e,t)},y.getSimilarTermsForExpressions=function(e,t){return"function"==typeof t&&(t=c(t)),p(e,["expressions"]),e.body=e.expressions,delete e.expressions,s("expressions/similar_terms/bulk",e,t)},y.compare=function(e,t){return"function"==typeof t&&(t=c(t)),p(e,["comparison"]),e={body:e.comparison},delete e.comparison,s("compare",e,t)},y.compareBulk=function(e,t){return"function"==typeof t&&(t=c(t)),p(e,["comparisons"]),e={body:e.comparisons},delete e.comparisons,s("compare/bulk",e,t)},y.getImage=function(e,t){return"string"==typeof e?e={body:{text:e}}:(p(e,["expression"]),e.body=e.expression,delete e.expression),"function"==typeof t&&(t=c(t)),e.image_scalar=e.image_scalar||"2",e.plot_shape=e.plot_shape||"circle",e.image_encoding=e.image_encoding||"base64/png",e.sparsity=e.sparsity||"1.0",s("image",e,t)},y.getImages=function(e,t){return"function"==typeof t&&(t=c(t)),p(e,["expressions"]),e.body=e.expressions,delete e.expressions,e.image_scalar=e.image_scalar||"2",e.plot_shape=e.plot_shape||"circle",e.sparsity=e.sparsity||"1.0",e.get_fingerprint=e.get_fingerprint||"false",s("image/bulk",e,t)},y.compareImage=function(e,t){return"function"==typeof t&&(t=c(t)),p(e,["expressions"]),e.body=e.expressions,delete e.expressions,e.image_scalar=e.image_scalar||"2",e.plot_shape=e.plot_shape||"circle",e.image_encoding=e.image_encoding||"base64/png",s("image/compare",e,t)},y.createCategoryFilter=function(e,t){return"function"==typeof t&&(t=c(t)),p(e,["filter_name"]),p(e,["positive_examples"]),e.body={},e.body.positiveExamples=e.positive_examples,delete e.positive_examples,"undefined"!=typeof e.negative_examples&&(e.body.negativeExamples=e.negative_examples,delete e.negative_examples),s("classify/create_category_filter",e,t)},y},retinaSDK.LiteClient=function(e,t,n){function o(e){return"undefined"!=typeof e?e.cosineSimilarity:void 0}function r(e){if("undefined"!=typeof e){for(var t=[],n=0;n<e.length;n++)t.push(e[n].term);return t}}function s(e){return"undefined"!=typeof e?e.positions:void 0}function i(e,t){if("undefined"!=typeof e){var n=e;e=function(e){var o=t(e);n(o)}}return e}function p(e){return{success:e}}var f=new retinaSDK.FullClient(e,t,n),u={};return u.getSimilarTerms=function(e,t){if("string"==typeof e)e={text:e};else{if(!(Array.isArray(e)&&e.length>0&&"number"==typeof e[0]))throw new Error("Invalid input for getSimilarTerms call: "+e);e={positions:e}}"function"==typeof t&&(t=p(t)),t&&"function"==typeof t.success&&(t.success=i(t.success,r));var n=f.getSimilarTermsForExpression({expression:e,max_results:20},t);return r(n)},u.getKeywords=function(e,t){return"function"==typeof t&&(t=p(t)),f.getKeywordsForText(e,t)},u.getFingerprint=function(e,t){return"function"==typeof t&&(t=p(t)),f.getFingerprintForText(e,t)},u.compare=function(e,t,n){"function"==typeof n&&(n=p(n)),n&&"function"==typeof n.success&&(n.success=i(n.success,o));var r;if("string"==typeof e&&"string"==typeof t)r=f.compare({comparison:[{text:e},{text:t}]},n);else if(Array.isArray(e)&&Array.isArray(t))r=f.compare({comparison:[{positions:e},{positions:t}]},n);else if("string"==typeof e&&Array.isArray(t))r=f.compare({comparison:[{text:e},{positions:t}]},n);else{if(!Array.isArray(e)||"string"!=typeof t)throw new Error("Unable to compute cosine similarity between '"+e+"' and '"+t+"'");r=f.compare({comparison:[{positions:e},{text:t}]},n)}return o(r)},u.createCategoryFilter=function(e,t){var n=[];if(!Array.isArray(e))throw new Error("Input to createCategoryFilter was not an array");for(var o=e.length,r=0;o>r;r++)n.push({text:e[r]});return"function"==typeof t&&(t=p(t)),t&&"function"==typeof t.success&&(t.success=i(t.success,s)),s(f.createCategoryFilter({filter_name:"anonymous",positive_examples:n},t))},u};