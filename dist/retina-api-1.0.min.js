var RetinaApiClient=function(e,r,t){function n(t,n,o,i){t=r+t,"undefined"==typeof o&&(o={});var s=new XMLHttpRequest,c="undefined"!=typeof i;return s.open(n,t,c),s.setRequestHeader("Accept","application/json"),s.setRequestHeader("Content-type","application/json"),s.setRequestHeader("api-key",e),c?(s.onreadystatechange=function(){4==s.readyState&&200==s.status&&i(JSON.parse(s.responseText))},void s.send(o)):(s.send(o),JSON.parse(s.responseText))}function o(e,r,t){var o=!0;for(var i in r)if(o?(e+="?",o=!1):e+="&",r.hasOwnProperty(i)){var s=i,c=r[i];e=e+s+"="+c}return n(e,"GET",null,t)}function i(e,r,t){var o=!0;for(var i in r)if("body"!=i&&(o?(e+="?",o=!1):e+="&",r.hasOwnProperty(i))){var s=i,c=r[i];e=e+s+"="+c}return n(e,"POST",JSON.stringify(r.body),t)}function s(e){return"undefined"!=typeof e?e.cosineSimilarity:void 0}function c(e){if("undefined"!=typeof e){for(var r=[],t=0;t<e.length;t++)r.push(e[t].term);return r}}function a(e){return"undefined"!=typeof e?e[0].positions:void 0}function u(e,r){if("undefined"!=typeof e){var t=e;e=function(e){var n=r(e);t(n)}}return e}if("undefined"==typeof e)throw new Error("Required apiKey argument was missing.");"undefined"==typeof r&&(r="http://api.cortical.io/rest/"),"undefined"==typeof t&&(t="en_associative");var f={};return f.core={},f.core.getRetinas=function(e,r){return o("retinas",e,r)},f.core.getTerms=function(e,r){return o("terms",e,r)},f.core.getContextsForTerm=function(e,r){return o("terms/contexts",e,r)},f.core.getSimilarTermsForTerm=function(e,r){return o("terms/similar_terms",e,r)},f.core.getFingerprintForText=function(e,r){return i("text",e,r)},f.core.getKeywordsForText=function(e,r){return i("text/keywords",e,r)},f.core.getTokensForText=function(e,r){return i("text/tokenize",e,r)},f.core.getSlicesForText=function(e,r){return i("text/slices",e,r)},f.core.getFingerprintForBulkText=function(e,r){return i("text/bulk",e,r)},f.core.getLanguageForText=function(e,r){return i("text/detect_language",e,r)},f.core.getFingerprintForExpression=function(e,r){return i("expressions",e,r)},f.core.getContextsForExpression=function(e,r){return i("expressions/contexts",e,r)},f.core.getSimilarTermsForExpression=function(e,r){return i("expressions/similar_terms",e,r)},f.core.getFingerprintsForTexts=function(e,r){return i("expressions/bulk",e,r)},f.core.getContextsForExpressions=function(e,r){return i("expressions/contexts/bulk",e,r)},f.core.getSimilarTermsForExpressions=function(e,r){return i("expressions/similar_terms/bulk",e,r)},f.core.compare=function(e,r){return i("compare",e,r)},f.core.compareBulk=function(e,r){return i("compare/bulk",e,r)},f.core.getImage=function(e,r){return i("image",e,r)},f.core.compareImage=function(e,r){return i("image/compare",e,r)},f.core.compareImages=function(e,r){return i("image/compare/bulk",e,r)},f.core.createCategoryFilter=function(e,r){return i("classify/create_category_filter",e,r)},f.basic={},f.basic.getSimilarTerms=function(e,r){r=u(r,c);var n=f.core.getSimilarTermsForExpression({retina_name:t,body:{text:e}},r);return c(n)},f.basic.getKeywords=function(e,r){return f.core.getKeywordsForText({retina_name:t,body:e},r)},f.basic.getFingerprint=function(e,r){r=u(r,a);var n=f.core.getFingerprintForText({retina_name:t,body:e},r);return a(n)},f.basic.compare=function(e,r,t){t=u(t,s);var n;if("string"==typeof e&&"string"==typeof r)n=f.core.compare({retina_name:"en_associative",body:[{text:e},{text:r}]},t);else if("object"==typeof e&&"object"==typeof r)n=f.core.compare({retina_name:"en_associative",body:[{positions:e},{positions:r}]},t);else if("string"==typeof e&&"object"==typeof r)n=f.core.compare({retina_name:"en_associative",body:[{text:e},{positions:r}]},t);else{if("object"!=typeof e||"string"!=typeof r)throw new Error("Unable to compute cosine similarity between '"+e+"' and '"+r+"'");n=f.core.compare({retina_name:"en_associative",body:[{positions:e},{text:r}]},t)}return s(n)},f};